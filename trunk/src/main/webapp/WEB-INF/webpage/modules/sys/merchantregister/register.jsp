<%@ page contentType="text/html;charset=UTF-8" language="java" %><%@include file="/WEB-INF/webpage/common/taglibs.jspf"%><!DOCTYPE html><head>    <meta charset="UTF-8">    <meta name="decorator" content="grid-select"/>    <meta name="viewport" content="width=device-width,initial-scale=1">    <meta http-equiv="X-UA-Compatible" content="ie=edge">    <link rel="shortcut icon" href="${staticPath}/common/favicon.ico">    <title>商家注册</title>     <link type="text/css" rel="stylesheet" href="${staticPath}/common/css/index.css"></head><body>    <!-- 头部导航 -->    <header class="header">        <div class="header-wrapper">            <div class="brand">                <img src="${staticPath}/common/img/logo.png" alt="">            </div>            <div class="header-title">                <p class="header-title-lg">微广播生活</p>            </div>            <div class="header-register-text"><span>注册商户账号</span></div>            <div class="head-gologin">                <span>我已注册，现在就</span>                <button>登录</button>            </div>        </div>    </header>    <div class="container">        <div class="register-form">            <form action="">               <div class="company">                   <label for="">公司名</label>                   <input type="text" class="companyinput" placeholder="输入公司名称" tabindex="1">                   <button type=button></button>               </div>               <div class="username">                    <label for="">姓名</label>                    <input type="text"class="usernameinput" placeholder="输入姓名" tabindex="2">                    <button type="button"></button>               </div>               <div class="telphone">                    <label for="">手机号</label>                    <input type="text" class="telphoneinput" placeholder="输入手机号" tabindex=""3 onkeyup="this.value=this.value.replace(/[^\d]/g,'')" onafterpaste="this.value=this.value.replace(/[^\d]/g,'')">                    <button type="button"></button>               </div>               <div class="verification">                    <label for="">验证码</label>                    <input type="text" class="verificationinput" placeholder="输入验证码" tabindex="4">                    <b></b>                    <button type="button" class="getmessagecode">获取短信验证码</button>                    <button type="button"></button>               </div>               <div class="password">                    <label for="">设置密码</label>                    <input type="password" class="passwordinput" placeholder="输入6-16位数字或字母" tabindex="5">                    <button type="button"></button>               </div>               <div class="confirmpwd">                    <label for="">确认密码</label>                    <input type="password" class="confirmpwdinput" placeholder="再次输入密码" tabindex="6">                    <button type="button"></button>               </div>               <div class="registerbtn">                    <label for=""></label>                    <input type="button" class="registerbtninput" value="立即注册">               </div>            </form>        </div>        <!-- <div class="download-area"></div> -->    </div>    <div class="footer">            Copyright©2018 潢川微广播网络科技有限公司. All Rights Reserved. 豫ICP备18039659号-1    </div><script>// 输入框onfous添加样式$('.register-form').find('input').on('focus',function(){    $(this).addClass('focus').removeClass('danger');    $(this).next().text('')})$('.telphoneinput').on('focus',function(){    $('.getmessagecode').next().text('');})// 输入框onblur移除样式$('.register-form').find('input').on('blur',function(){    $(this).removeClass('focus')})//获取短信验证码$('.getmessagecode').on('click',function(){   //开启60s倒计时   var val=$('.telphoneinput').val();     if(telphoneverif()){//手机号验证通过        $.ajax({        method:"get",        url:'${adminPath}/sys/merchantregister/sendVerifyCode',        data:{"telephone":val,"type":"1"},        beforeSend:function(){            $('.getmessagecode').prop('disabled',true)        },        success:function(data){            // console.dir(data)            if(data.ret==0){                msgcode=data.data;                var time=60;                               $('.getmessagecode').addClass('success');                var t1=setInterval(function(){                    time--;                     $('.getmessagecode').html(time+'s')                     if(time<0){                         clearInterval(t1);                         $('.getmessagecode').prop('disabled',false)                         $('.getmessagecode').html('获取短信验证码');                         $('.getmessagecode').removeClass('success')                     }                },1000)            }else{                $('.getmessagecode').prop('disabled',false);                $('.getmessagecode').next().text(data.msg);            }        }    })   }else{//手机号验证未通过   }})// 公司的验证function companyverif(){    var company=false;    var val=$('.companyinput').val();    //var reg = /[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g;    if(val!=''){//不为空        company=true;    }else{//为空        $('.company').find('input').addClass('danger')        $('.company').find('button').text('公司名不能为空')    }    return company;}// 姓名的验证function usernameverif(){    var username=false;    var val=$('.usernameinput').val();    if(val!=''){//不为空        username=true;    }else{//为空        $('.usernameinput').addClass('danger')        $('.usernameinput').next().text('姓名不能为空')    }    return username;}//手机号的验证function telphoneverif(){    var telphone=false;    var val=$('.telphoneinput').val();    var reg=/^[1][0-9]{10}$/;    if(reg.test(val)){//验证通过        telphone=true;    }else{        $('.telphoneinput').addClass('danger')        $('.telphoneinput').next().text('请输入正确的手机号')    }    return telphone}//验证码的验证function verificationinputverif(){    var verificationinput=false;    var val=$('.verificationinput').val();    if(val!=''){//不为空        verificationinput=true;        // if(msgcode==val){//验证码一致        //     verificationinput=true;        // }else{        //     $('.verificationinput').addClass('danger');        //     $('.verificationinput').next().next().next().text('输入正确的验证码')        // }    }else{        $('.verificationinput').addClass('danger');        $('.verificationinput').next().next().next().text('输入正确的验证码')    }    return verificationinput}//设置密码验证function passwordinputverif(){    var  passwordinput=false;    var val=$('.passwordinput').val();    var reg=/^[a-zA-Z\d]{6,16}$/;    if(reg.test(val)){//验证通过        passwordinput=true;    }else{        $('.passwordinput').addClass('danger');        $('.passwordinput').next().text('输入正确的密码')    }    return passwordinput}//确认密码验证function confirmpwdinputverif(){    var confirmpwdinput=false;    var val=$('.confirmpwdinput').val();    var val2=$('.passwordinput').val();    if(val==''){        $('.confirmpwdinput').addClass('danger');        $('.confirmpwdinput').next().text('请确认密码')    }else if(val!=val2){//        $('.confirmpwdinput').addClass('danger');        $('.confirmpwdinput').next().text('两次输入密码不同')    }else{//        confirmpwdinput=true;    }    return confirmpwdinput;}//6个输入框移除焦点时候，加验证$('.companyinput').on('blur',function(){    var val=$(this).val();    if(val==''){        $(this).addClass('danger');        $(this).next().text('公司名不能为空')    }})$('.usernameinput').on('blur',function(){    var val=$(this).val();    if(val==''){        $(this).addClass('danger');        $(this).next().text('姓名不能为空')    }})$('.telphoneinput').on('blur',function(){    var val=$(this).val();    var reg=/^[1][0-9]{10}$/;    if(val==''){        $(this).addClass('danger');        $(this).next().text('手机号不能为空')    }else {        if(!reg.test(val)){            $(this).addClass('danger');            $(this).next().text('手机号格式不正确')        }    }})$('.verificationinput').on('focus',function(){    $(this).next().next().next().text('');})$('.verificationinput').on('blur',function(){    var val=$(this).val();    if(val==''){        $(this).addClass('danger');        $(this).next().next().next().text('验证码不能为空');    }else{        $(this).removeClass('danger');        $(this).next().next().next().text('');    }})$('.passwordinput').on('blur',function(){    var val=$(this).val();    var reg=/^[a-zA-Z\d]{6,16}$/;    if(!reg.test(val)){        $(this).addClass('danger');        $(this).next().text('请输入6-16位数字或字母')    }})$('.confirmpwdinput').on('blur',function(){    var val=$('.confirmpwdinput').val();    var val2=$('.passwordinput').val();    if(val==''){        $('.confirmpwdinput').addClass('danger');        $('.confirmpwdinput').next().text('请确认密码')    }else if(val!=val2){        $('.confirmpwdinput').addClass('danger');        $('.confirmpwdinput').next().text('两次输入密码不同')    }})// 注册校验$('.registerbtninput').on('click',function(){    var companyName=$('.companyinput').val()    var telphone=$('.telphoneinput').val()    var NAME=$('.usernameinput').val()    var code=$('.verificationinput').val()    var password=$('.passwordinput').val()    var vpassword=$('.confirmpwdinput ').val()    if(companyverif()&&usernameverif()&&telphoneverif()&&verificationinputverif()&&passwordinputverif()&&confirmpwdinputverif()){        //验证通过后        $.ajax({            method:"post",            url:'${adminPath}/sys/merchantregister/officialRegister',            data:{'companyname':companyName,"username":telphone,"realname":NAME,"code":code,"password":password,"vpassword":vpassword},            beforeSend:function(){                $('.registerbtninput').prop('disabled',true)            },            success:function(data){                if(data.ret==0){                    //注册成功                    alert('提审成功，请等待官方审核！')                    location.href="${adminPath}"                }else{                    alert(data.msg)                    $('.registerbtninput').prop('disabled',false)                }            }        })    }})// 头部的登陆按钮$('.head-gologin').on('click',function(){   location.href="${adminPath}"})</script></body></html>